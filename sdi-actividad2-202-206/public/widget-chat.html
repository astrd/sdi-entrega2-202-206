<link rel="stylesheet" href="css/chatstyle.css"/>

<div class="bodyWrapper">
    <div class="currentChat">
        <div class="currentChatHeader">
            <div class="currentChatImageWrapper">
                <img src="img/heart.png" alt="" class="currentChatImage">
            </div>
            <div class="currentChatHeaderTitle">
                <h3>Chat title</h3>
            </div>
        </div>
        <div class="currentChatContent">
            <div class="message received">
                <div class="messageContent">
                    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Commodi voluptates, dicta natus
                    repudiandae perspiciatis quas sit pariatur nesciunt iure doloremque?
                </div>
                <div class="messageTime">12:32</div>
            </div>
            <div class="message sent">
                <div class="messageContent">
                    Enviado
                </div>
                <div class="messageTime">12:50</div>
            </div>
        </div>
        <div class="currentChatInput">
            <input type="text" name="" id="inputMessage">
            <input type="button" value="↩︎" id="submitMessage" onclick="showMessage()">
        </div>
    </div>
</div>
<script>
    function loadConversation() {
        
        $.ajax({
            url: URLbase + "/search/offer/conversation/" + conversacion._id,
            type: "GET",
            data: {},
            headers: {"token": token},
            success: function (respuesta) {
                conversaciones = respuesta;
                console.log(conversaciones)
                // actualizarTabla(conversaciones);
            },
            error: function () {
                $("#contenedor-principal").load("widget-login.html");
            }
        });
    }

    function showMessage(conversacion) {
        // Tenemos que cargar antes la conversación, teneies que crear un nuevo controlador que busque la conversacion
        // con el id de la oferta y token de usuarios
        let token = Cookies.get('token');
        $.ajax({
            url: URLbase + "/offer/conversation/" + conversacion._id,
            type: "GET",
            data: {},
            headers: {"token": token},
            success: function (respuesta) {
                conversaciones = respuesta;
                mostrarMensajes(conversaciones);
            },
            error: function () {
                $("#contenedor-principal").load("widget-login.html");
            }
        });
    }

    function mostrarMensajes(mensajes) {

    }

    showMessage();
</script>
